import{h as F,r as l,j as e,B as U,aK as H,az as z}from"./index-DF39fIja.js";import{O as q}from"./OrganizationApi-C20gbs-E.js";import{B as L}from"./badge-BS8zFS8p.js";import{E as M,a as K,b as W,T as $,c as G,d as J,D as Q}from"./data-table-pagination-CArNkiL2.js";import{I as X}from"./input-Beg9W2YX.js";import{S as b,a as N,b as S,c as v,d as a}from"./select-BJRIUSWV.js";import{T as Y,a as Z,b as B,c as t,d as _,e as r}from"./table-CPwyJAyW.js";import{D as ee}from"./download-B_4-tzIY.js";import{S as se}from"./search-rBBBnAww.js";import"./chevron-left-64XFlFG2.js";import"./chevron-right-CAHHUv44.js";import"./index-BnUIW6bB.js";import"./index-B6vVFevd.js";import"./index-DJ3P-8yo.js";import"./Combination-CALKROlh.js";import"./index-DLqox5B5.js";import"./index-D8KmP1cX.js";import"./chevron-down-DJg8-_AN.js";import"./check-BwEiyP4O.js";function te(){const{user:o}=F(s=>s.auth),[f,y]=l.useState(1),[c,P]=l.useState(""),[m,A]=l.useState("all"),[u,I]=l.useState("all"),[x,R]=l.useState("all"),[C,E]=l.useState([]),[w,D]=l.useState(0),[O,d]=l.useState(!1),h=20,V=Math.ceil(w/h),T=async()=>{if(o){d(!0);try{const s=new q,n={type:"Shop",smartFilter:c,filterByRegionId:x&&parseInt(x)};m!=="all"&&(n.filterByShopStatus=m),u!=="all"&&(n.filterByShopCertification=u);const j=H.create({resultsLimitOffset:(f-1)*h,resultsLimitCount:h,resultsOrderBy:"Name",resultsOrderAscending:!0});n.resultParameter=j;const g=z.create(n);s.search(g,{status200:i=>{E(i.organizations||[]),D(i.totalItemCount||0),d(!1)},error:i=>{d(!1)},status403:i=>{d(!1)}})}catch{d(!1)}}};return l.useEffect(()=>{if(!o)return;y(1);const s=setTimeout(()=>{T()},c?500:0);return()=>clearTimeout(s)},[c,m,u,x,o]),l.useEffect(()=>{o&&T()},[f]),e.jsxs("div",{className:"bg-background min-h-screen",children:[e.jsx("div",{className:"bg-background",children:e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsx("h1",{className:"text-foreground text-2xl font-bold",children:"Manage Shops"}),e.jsxs(U,{children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Report"]})]})}),e.jsxs("div",{className:"px-6 py-6",children:[e.jsxs("div",{className:"mb-6 flex flex-col gap-4 lg:flex-row lg:items-center",children:[e.jsxs("div",{className:"relative max-w-md flex-1",children:[e.jsx(se,{className:"text-muted-foreground absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2"}),e.jsx(X,{value:c,onChange:s=>P(s.target.value),placeholder:"Filter by Name, #, City",className:"pl-10"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs(b,{value:m,onValueChange:s=>A(s),children:[e.jsx(N,{className:"bg-muted w-48",children:e.jsx(S,{placeholder:"Status"})}),e.jsxs(v,{children:[e.jsx(a,{value:"all",children:"All Status"}),e.jsx(a,{value:"Certified",children:"Certified"}),e.jsx(a,{value:"Closed",children:"Closed"}),e.jsx(a,{value:"InProcess",children:"In-Process"}),e.jsx(a,{value:"Suspended",children:"Suspended"}),e.jsx(a,{value:"Terminated",children:"Terminated"})]})]}),e.jsxs(b,{value:u,onValueChange:s=>I(s),children:[e.jsx(N,{className:"bg-muted w-48",children:e.jsx(S,{placeholder:"Certification"})}),e.jsxs(v,{children:[e.jsx(a,{value:"all",children:"All Certifications"}),e.jsx(a,{value:"AudiUltra",children:"Audi Ultra"}),e.jsx(a,{value:"AudiHybrid",children:"Audi Hybrid"}),e.jsx(a,{value:"VW",children:"Volkswagen"})]})]}),e.jsxs(b,{value:x,onValueChange:s=>R(s),children:[e.jsx(N,{className:"bg-muted w-48",children:e.jsx(S,{placeholder:"CSR Region"})}),e.jsxs(v,{children:[e.jsx(a,{value:"all",children:"All Regions"}),o?.regions?.map(s=>e.jsx(a,{value:s.id?.toString()||"",children:s.name},s.id))]})]})]})]}),O?e.jsx("div",{className:"bg-background overflow-hidden rounded-lg border shadow-sm",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"text-muted-foreground",children:"loading..."})})}):C.length===0?e.jsx("div",{className:"bg-background overflow-hidden rounded-lg border shadow-sm",children:e.jsx(M,{children:e.jsxs(K,{children:[e.jsx(W,{variant:"icon",children:e.jsx($,{className:"h-4 w-4"})}),e.jsx(G,{children:"No data to display"}),e.jsx(J,{children:"There are no records in this table yet. Add your first entry to get started."})]})})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-background overflow-hidden rounded-lg border shadow-sm",children:e.jsxs(Y,{children:[e.jsx(Z,{children:e.jsxs(B,{className:"bg-muted",children:[e.jsx(t,{className:"text-foreground font-semibold",children:"Name"}),e.jsx(t,{className:"text-foreground font-semibold",children:"Number"}),e.jsx(t,{className:"text-foreground font-semibold",children:"# of Pending Orders"}),e.jsx(t,{className:"text-foreground font-semibold",children:"# of Active Users"}),e.jsx(t,{className:"text-foreground font-semibold",children:"# of Pending Users"}),e.jsx(t,{className:"text-foreground font-semibold",children:"Status"}),e.jsx(t,{className:"text-foreground font-semibold",children:"Certification"}),e.jsx(t,{className:"text-foreground font-semibold",children:"Address"}),e.jsx(t,{className:"text-foreground font-semibold",children:"City"}),e.jsx(t,{className:"text-foreground font-semibold",children:"State"}),e.jsx(t,{className:"text-foreground font-semibold",children:"Dealer"}),e.jsx(t,{className:"text-foreground font-semibold",children:"Dealer #"}),e.jsx(t,{className:"text-foreground font-semibold",children:"Region"})]})}),e.jsx(_,{children:C.map(s=>{const n=s.sponsorDealership,j=n?.name||"--",g=n?.dealershipNumber||"--",i=s.region?.name||"--",p=s.filterByShopStatus||"--",k=s.filterByShopCertification||"--";return e.jsxs(B,{className:"hover:bg-background",children:[e.jsx(r,{className:"font-medium text-blue-600",children:e.jsx("span",{className:"cursor-pointer hover:underline",children:s.name||"--"})}),e.jsx(r,{children:s.shopNumber||"--"}),e.jsx(r,{className:"text-center font-medium",children:s.countPendingOrders??0}),e.jsx(r,{className:"text-center",children:s.countActiveUsers??0}),e.jsx(r,{className:"text-center",children:s.countPendingUsers??0}),e.jsx(r,{children:e.jsx(L,{variant:p==="certified"?"default":"secondary",className:p==="certified"?"bg-green-100 text-green-800 hover:bg-green-200":"",children:p})}),e.jsx(r,{children:k}),e.jsx(r,{className:"text-muted-foreground text-sm",children:s.address||"--"}),e.jsx(r,{children:s.city||"--"}),e.jsx(r,{children:s.state||"--"}),e.jsx(r,{children:j}),e.jsx(r,{children:g}),e.jsx(r,{children:i})]},s.id)})})]})}),e.jsx(Q,{currentPage:f,totalPages:V,totalItems:w,itemsPerPage:h,onPageChange:y})]})]})]})}const ve=te;export{ve as component};
