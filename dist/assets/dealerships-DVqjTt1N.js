import{h as P,r,j as e,B as T,w as S,aB as D}from"./index-DiI2ffAh.js";import{O as C}from"./OrganizationApi-C5kJOLq0.js";import{E,a as O,b as k,T as A,c as I,d as B,D as F}from"./data-table-pagination-BYSKvq0r.js";import{I as R}from"./input-anrjtq5m.js";import{T as U,a as q,b as x,c as t,d as z,e as a}from"./table-DfggTbkb.js";import{D as H}from"./download-CTZAi_Qa.js";import{S as L}from"./search-Dee6z3yd.js";import"./chevron-left-CVoIS1tR.js";import"./chevron-right-B2dPWAbi.js";function M(){const{user:c}=P(s=>s.auth),[d,f]=r.useState(1),[o,g]=r.useState(""),[m,j]=r.useState([]),[u,p]=r.useState(0),[b,n]=r.useState(!1),i=20,N=Math.ceil(u/i),y=async()=>{if(c){n(!0);try{const s=new C,h={type:"Dealership",smartFilter:o||void 0},v=S.create({resultsLimitOffset:(d-1)*i,resultsLimitCount:i,resultsOrderBy:"Name",resultsOrderAscending:!1});h.resultParameter=v;const w=D.create(h);s.search(w,{status200:l=>{j(l.organizations||[]),p(l.totalItemCount||0),n(!1)},error:l=>{n(!1)},status403:l=>{n(!1)}})}catch{n(!1)}}};return r.useEffect(()=>{if(!c)return;const s=setTimeout(()=>{y()},o?500:0);return()=>clearTimeout(s)},[o,d,c]),e.jsx("div",{className:"bg-background min-h-screen",children:e.jsxs("div",{className:"bg-background",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsx("h1",{className:"text-foreground text-2xl font-bold",children:"Manage Dealers"}),e.jsxs(T,{children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Report"]})]}),e.jsxs("div",{className:"px-6 py-6",children:[e.jsx("div",{className:"mb-6 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"text-muted-foreground absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2"}),e.jsx(R,{value:o,onChange:s=>g(s.target.value),placeholder:"Filter by Name, #, City",className:"border-gray-300 pl-10"})]})}),b?e.jsx("div",{className:"bg-background overflow-hidden rounded-lg shadow-sm",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"text-muted-foreground",children:"loading..."})})}):m.length===0?e.jsx("div",{className:"bg-background overflow-hidden rounded-lg shadow-sm",children:e.jsx(E,{children:e.jsxs(O,{children:[e.jsx(k,{variant:"icon",children:e.jsx(A,{className:"h-4 w-4"})}),e.jsx(I,{children:"No data to display"}),e.jsx(B,{children:"There are no records in this table yet. Add your first entry to get started."})]})})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-background overflow-hidden rounded-lg shadow-sm",children:e.jsxs(U,{children:[e.jsx(q,{children:e.jsxs(x,{className:"bg-muted",children:[e.jsx(t,{className:"text-foreground font-semibold",children:"Name"}),e.jsx(t,{className:"text-foreground font-semibold",children:"Number"}),e.jsx(t,{className:"text-foreground font-semibold",children:"# of Pending Orders"}),e.jsx(t,{className:"text-foreground font-semibold",children:"City"}),e.jsx(t,{className:"text-foreground font-semibold",children:"State"}),e.jsx(t,{className:"text-foreground font-semibold",children:"# of Active Users"}),e.jsx(t,{className:"text-foreground font-semibold",children:"# of Pending Users"})]})}),e.jsx(z,{children:m.map(s=>e.jsxs(x,{className:"hover:bg-background",children:[e.jsx(a,{className:"cursor-pointer font-medium text-blue-600 hover:underline",children:s.name||"--"}),e.jsx(a,{children:s.dealershipNumber||"--"}),e.jsx(a,{className:"text-center font-medium",children:s.countPendingOrders??0}),e.jsx(a,{children:s.city||"--"}),e.jsx(a,{children:s.state||"--"}),e.jsx(a,{className:"text-center",children:s.countActiveUsers??0}),e.jsx(a,{className:"text-center",children:s.countPendingUsers??0})]},s.id))})]})}),e.jsx(F,{currentPage:d,totalPages:N,totalItems:u,itemsPerPage:i,onPageChange:f})]})]})]})})}const Z=M;export{Z as component};
