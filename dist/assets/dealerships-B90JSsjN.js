import{h as P,r as t,j as e,B as T,aI as S,aw as D}from"./index-AEJqH7X3.js";import{I as E}from"./input-CmFiA4aS.js";import{T as C,a as O,b as g,c as r,d as I,e as a}from"./table-CLMC4NFY.js";import{E as k,a as A,b as F,T as R,c as B,d as U,D as q}from"./data-table-pagination-BSf0H6nt.js";import{O as z}from"./OrganizationApi-CGUmZATk.js";import{D as H}from"./download-0Ly1j3x4.js";import{S as L}from"./search-Vz5iWtZn.js";import"./chevron-left-DKC3Dz-S.js";import"./chevron-right-PyYQBaYj.js";function M(){const{user:o}=P(s=>s.auth),[d,m]=t.useState(1),[i,j]=t.useState(""),[u,p]=t.useState([]),[h,b]=t.useState(0),[N,n]=t.useState(!1),l=20,y=Math.ceil(h/l),x=async()=>{if(o){n(!0);try{const s=new z,f={type:"Dealership",smartFilter:i||void 0},v=S.create({resultsLimitOffset:(d-1)*l,resultsLimitCount:l,resultsOrderBy:"Name",resultsOrderAscending:!0});f.resultParameter=v;const w=D.create(f);s.search(w,{status200:c=>{p(c.organizations||[]),b(c.totalItemCount||0),n(!1)},error:c=>{n(!1)},status403:c=>{n(!1)}})}catch{n(!1)}}};return t.useEffect(()=>{if(!o)return;m(1);const s=setTimeout(()=>{x()},i?500:0);return()=>clearTimeout(s)},[i,o]),t.useEffect(()=>{o&&x()},[d]),e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"bg-background",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Manage Dealers"}),e.jsxs(T,{children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Report"]})]}),e.jsxs("div",{className:"px-6 py-6",children:[e.jsx("div",{className:"mb-6 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(E,{value:i,onChange:s=>j(s.target.value),placeholder:"Filter by Name, #, City",className:"border-gray-300 pl-10"})]})}),N?e.jsx("div",{className:"overflow-hidden rounded-lg bg-background shadow-sm",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"text-muted-foreground",children:"loading..."})})}):u.length===0?e.jsx("div",{className:"overflow-hidden rounded-lg bg-background shadow-sm",children:e.jsx(k,{children:e.jsxs(A,{children:[e.jsx(F,{variant:"icon",children:e.jsx(R,{className:"h-4 w-4"})}),e.jsx(B,{children:"No data to display"}),e.jsx(U,{children:"There are no records in this table yet. Add your first entry to get started."})]})})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-hidden rounded-lg bg-background shadow-sm",children:e.jsxs(C,{children:[e.jsx(O,{children:e.jsxs(g,{className:"bg-muted",children:[e.jsx(r,{className:"font-semibold text-foreground",children:"Name"}),e.jsx(r,{className:"font-semibold text-foreground",children:"Number"}),e.jsx(r,{className:"font-semibold text-foreground",children:"# of Pending Orders"}),e.jsx(r,{className:"font-semibold text-foreground",children:"City"}),e.jsx(r,{className:"font-semibold text-foreground",children:"State"}),e.jsx(r,{className:"font-semibold text-foreground",children:"# of Active Users"}),e.jsx(r,{className:"font-semibold text-foreground",children:"# of Pending Users"})]})}),e.jsx(I,{children:u.map(s=>e.jsxs(g,{className:"hover:bg-background",children:[e.jsx(a,{className:"cursor-pointer font-medium text-blue-600 hover:underline",children:s.name||"--"}),e.jsx(a,{children:s.dealershipNumber||"--"}),e.jsx(a,{className:"text-center font-medium",children:s.countPendingOrders??0}),e.jsx(a,{children:s.city||"--"}),e.jsx(a,{children:s.state||"--"}),e.jsx(a,{className:"text-center",children:s.countActiveUsers??0}),e.jsx(a,{className:"text-center",children:s.countPendingUsers??0})]},s.id))})]})}),e.jsx(q,{currentPage:d,totalPages:y,totalItems:h,itemsPerPage:l,onPageChange:m})]})]})]})})}const Z=M;export{Z as component};
