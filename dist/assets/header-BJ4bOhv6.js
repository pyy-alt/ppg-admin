import{a as p,r as N,j as e,B as f,a8 as Y,K as Z,M as b,a9 as L,t as w,aa as ee,ab as se,h as te,ac as re,A as ae}from"./index-DiI2ffAh.js";import{P as R}from"./PersonApi-CgbCoTOu.js";import{D as Q,a as X,b as J,e as $,c as ne,d as W}from"./dropdown-menu-DS9Dg1PJ.js";import{u as oe,a as ie,F as ce,b as k,c as S,d as A,e as P,f as D}from"./form-BztM4JIr.js";import{D as z,a as O,b as H,c as M,e as B}from"./dialog-BfbMbQ8-.js";import{I as C}from"./input-anrjtq5m.js";import{S as V}from"./separator-unOUWFl-.js";import{X as G}from"./x-DoFJH5Nd.js";import{C as K}from"./check-Ca0fbDYF.js";import{B as _}from"./badge-CmxtL1uP.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],de=p("circle-x",le);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],xe=p("globe",me);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],ue=p("log-out",he);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],fe=p("lock",pe);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Ne=p("pause",je);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],ge=p("play",we);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],ve=p("store",ye);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M11.5 15H7a4 4 0 0 0-4 4v2",key:"15lzij"}],["path",{d:"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1817ys"}],["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}]],ke=p("user-pen",be);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],U=p("users",Se);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Pe=p("user",Ae),Ce="data:image/svg+xml,%3csvg%20width='168'%20height='54'%20viewBox='0%200%20168%2054'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='26.5851'%20cy='26.5851'%20r='24.5851'%20stroke='white'%20stroke-width='4'/%3e%3ccircle%20cx='64.8586'%20cy='26.5851'%20r='24.5851'%20stroke='white'%20stroke-width='4'/%3e%3ccircle%20cx='103.14'%20cy='26.5851'%20r='24.5851'%20stroke='white'%20stroke-width='4'/%3e%3ccircle%20cx='141.413'%20cy='26.5851'%20r='24.5851'%20stroke='white'%20stroke-width='4'/%3e%3c/svg%3e",Re=Z({firstName:b().min(1,"First name is required"),lastName:b().min(1,"Last name is required"),email:b().email("Invalid email address"),currentPassword:b().optional(),newPassword:b().optional(),confirmPassword:b().optional()}).refine(a=>a.currentPassword||a.newPassword||a.confirmPassword?a.currentPassword&&a.newPassword&&a.confirmPassword:!0,{message:"All password fields are required",path:["currentPassword"]}).refine(a=>a.newPassword?a.newPassword.length>=8:!0,{message:"New password must be at least 8 characters",path:["newPassword"]}).refine(a=>a.newPassword&&a.confirmPassword?a.newPassword===a.confirmPassword:!0,{message:"Passwords do not match",path:["confirmPassword"]});function Ie({open:a,onOpenChange:h,initialData:t={firstName:"Jake",lastName:"Renshaw",email:"jake.renshaw@sunsetauto.com"}}){const[l,n]=N.useState(!1),s=oe({resolver:ie(Re),defaultValues:{firstName:t.firstName,lastName:t.lastName,email:t.email,currentPassword:"",newPassword:"",confirmPassword:""}}),I=o=>{const g=new R,j=new Y;j.firstName=t.firstName,j.lastName=t.lastName,j.email=t.email,g.edit(j,{status200:y=>{h(!1),s.reset()},error:y=>{},else:()=>{}}),h(!1),s.reset()},u=()=>{h(!1),s.reset(),n(!1)};return e.jsx(z,{open:a,onOpenChange:u,children:e.jsxs(O,{className:"sm:max-w-md",children:[e.jsxs(H,{children:[e.jsx(M,{className:"text-xl font-semibold",children:"Edit profile"}),e.jsxs("button",{onClick:u,className:"ring-offset-background focus:ring-ring absolute top-4 right-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-none",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]}),e.jsx(ce,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(I),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-2 text-lg font-medium",children:[e.jsx(Pe,{className:"text-foreground h-5 w-5"}),e.jsx("h3",{children:"Personal Information"})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsx(k,{control:s.control,name:"firstName",render:({field:o})=>e.jsxs(S,{children:[e.jsx(A,{children:"First Name"}),e.jsx(P,{children:e.jsx(C,{...o})}),e.jsx(D,{})]})}),e.jsx(k,{control:s.control,name:"lastName",render:({field:o})=>e.jsxs(S,{className:"mt-4",children:[e.jsx(A,{children:"Last Name"}),e.jsx(P,{children:e.jsx(C,{...o})}),e.jsx(D,{})]})}),e.jsx(k,{control:s.control,name:"email",render:({field:o})=>e.jsxs(S,{className:"mt-4",children:[e.jsx(A,{children:"Email"}),e.jsx(P,{children:e.jsx(C,{...o,disabled:!0,className:"bg-muted"})})]})})]})]}),e.jsx(V,{}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("button",{type:"button",onClick:()=>n(!l),className:"bg-muted hover:bg-muted/80 flex w-full items-center justify-between rounded-lg px-4 py-3 text-left transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"text-foreground h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Click here to update password"})]}),e.jsx("svg",{className:`text-muted-foreground h-5 w-5 transition-transform ${l?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),l&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2 space-y-4",children:[e.jsx(k,{control:s.control,name:"currentPassword",render:({field:o})=>e.jsxs(S,{children:[e.jsx(A,{children:"Current Password"}),e.jsx(P,{children:e.jsx(C,{type:"password",placeholder:"••••••••",...o})}),e.jsx(D,{})]})}),e.jsx(k,{control:s.control,name:"newPassword",render:({field:o})=>e.jsxs(S,{children:[e.jsx(A,{children:"New Password"}),e.jsx(P,{children:e.jsx(C,{type:"password",placeholder:"Enter new password",...o})}),e.jsx(D,{})]})}),e.jsx(k,{control:s.control,name:"confirmPassword",render:({field:o})=>e.jsxs(S,{children:[e.jsx(A,{children:"Confirm Password"}),e.jsx(P,{children:e.jsx(C,{type:"password",placeholder:"Confirm new password",...o})}),e.jsx(D,{})]})})]})]}),e.jsxs(B,{className:"gap-3 sm:gap-3",children:[e.jsx(f,{type:"button",variant:"outline",onClick:u,children:"Cancel"}),e.jsx(f,{type:"submit",variant:"default",disabled:s.formState.isSubmitting,children:s.formState.isSubmitting?"Saving...":"Save"})]})]})})]})})}function De({open:a,onOpenChange:h,teamMembers:t,onSuccess:l}){const[n,s]=N.useState(t??[]),[I]=N.useState(null);N.useEffect(()=>{t&&s(t)},[t]);const u=()=>h(!1),o=async r=>{try{return await new Promise((i,d)=>{const c=L.create({personId:Number(r),action:"Deactivate"});new R().editStatus(c,{status200:()=>{w.success("Member deactivated successfully"),l?.(),i(!0)},error:m=>{d(m)},else:(m,x)=>{d(new Error(x))}})})}catch{w.error("Failed to deactivate member")}},g=async r=>{try{return await new Promise((i,d)=>{const c=L.create({personId:Number(r),action:"Reactivate"});new R().editStatus(c,{status200:()=>{i(!0)},error:m=>{d(m)},else:(m,x)=>{d(new Error(x))}})})}catch{w.error("Failed to reactivate member")}},j=async r=>{try{return await new Promise((i,d)=>{const c=L.create({personId:Number(r),action:"ApproveRegistrationRequest"});new R().editStatus(c,{status200:()=>{w.success("Member approved successfully"),l?.(),i(!0)},error:m=>{d(m)},else:(m,x)=>{d(new Error(x))}})})}catch{return w.error("Failed to approve member"),!1}},y=async r=>{try{return await new Promise((i,d)=>{const c=L.create({personId:Number(r),action:"DeclineRegistrationRequest"});new R().editStatus(c,{status200:()=>{w.success("Member rejected successfully"),l?.(),i(!0)},error:m=>{d(m)},else:(m,x)=>{d(new Error(x))}})})}catch{return w.error("Failed to reject member"),!1}},T=r=>{if(!r)return null;switch(r){case"Pending":case"RegistrationRequested":return e.jsx("span",{className:"text-destructive font-medium",children:"Pending Approval"});case"Active":return e.jsx("span",{className:"font-medium text-green-600",children:"Active"});case"Inactive":return e.jsx("span",{className:"text-muted-foreground font-medium",children:"Inactive"});default:return null}},q=r=>{if(I===r.id)return e.jsx(f,{size:"sm",disabled:!0,children:e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"})});switch(r.status){case"Active":return e.jsxs(f,{size:"sm",variant:"outline",onClick:()=>o(r.id??""),children:[e.jsx(Ne,{className:"mr-1 h-3.5 w-3.5"})," Deactivate"]});case"Inactive":return e.jsxs(f,{size:"sm",variant:"outline",onClick:()=>g(r.id??""),children:[e.jsx(ge,{className:"mr-1 h-3.5 w-3.5"})," Reactivate"]});case"Pending":case"RegistrationRequested":return e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(f,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>j(r.id??""),children:[e.jsx(K,{className:"mr-1 h-3.5 w-3.5"})," Approve"]}),e.jsxs(f,{size:"sm",variant:"destructive",onClick:()=>y(r.id??""),children:[e.jsx(de,{className:"mr-1 h-3.5 w-3.5"})," Reject"]})]});default:return null}};return e.jsx(z,{open:a,onOpenChange:u,children:e.jsxs(O,{className:"flex max-h-[90vh] flex-col sm:max-w-7xl",children:[e.jsxs(H,{className:"shrink-0",children:[e.jsxs(M,{className:"flex items-center gap-3 text-2xl font-semibold",children:[e.jsx(U,{className:"h-7 w-7"}),"Program Admin View of Team Members"]}),e.jsxs("button",{onClick:u,className:"focus:ring-ring absolute top-4 right-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-none",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]}),e.jsxs("div",{className:"flex-1 space-y-8 overflow-y-auto scroll-smooth py-6",children:[e.jsx("p",{className:"text-muted-foreground mb-6 text-sm",children:"When Admin view Shop/Dealer Team Members, the Approve and Reject button appear if a member needs to be approved/rejected."}),e.jsx("div",{className:"overflow-auto rounded-lg border",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium",children:"First Name"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium",children:"Last Name"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium",children:"Email"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium",children:"Date Added"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium",children:"Date Last Accessed"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium",children:"Status / Actions"})]})}),e.jsxs("tbody",{className:"divide-border divide-y",children:[n.map(r=>e.jsxs("tr",{className:"hover:bg-muted/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 font-medium",children:r.firstName}),e.jsx("td",{className:"px-6 py-4",children:r.lastName}),e.jsx("td",{className:"text-muted-foreground px-6 py-4 font-mono text-sm",children:r.email}),e.jsx("td",{className:"px-6 py-4 text-sm",children:r.dateAdded}),e.jsx("td",{className:"px-6 py-4 text-sm",children:r.dateLastAccessed||"—"}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[T(r.status),q(r)]})})]},r.id)),n.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-muted-foreground px-6 py-6 text-center text-sm",children:"No team members found."})})]})]})})]}),e.jsx(B,{className:"mt-4 flex-shrink-0 gap-3 border-t pt-4",children:e.jsx(f,{onClick:u,children:"Close"})})]})})}const Ee=[{code:"en",label:"English"},{code:"fr-CA",label:"Français"}];function Te(){const{language:a,setLanguage:h}=ee();return e.jsxs(Q,{children:[e.jsx(X,{asChild:!0,className:"hover:text-primary text-white",children:e.jsx("button",{className:"rounded-full p-2 transition-colors hover:bg-white/10",children:e.jsx(xe,{className:"h-5 w-5"})})}),e.jsx(J,{align:"end",className:"w-40",children:Ee.map(t=>e.jsxs($,{onClick:()=>h(t.code),className:"flex cursor-pointer items-center justify-between",children:[e.jsx("span",{children:t.label}),a===t.code&&e.jsx(K,{className:"h-4 w-4 text-black"})]},t.code))})]})}const F=Object.freeze({ACTIVE:"Active",INACTIVE:"Inactive",REGISTRATION_REQUESTED:"RegistrationRequested",PENDING:"Pending"}),E=Object.freeze({SHOP:"Shop",DEALERSHIP:"Dealership",CSR:"Csr",FIELD_STAFF:"FieldStaff",PROGRAM_ADMINISTRATOR:"ProgramAdministrator"});function Le({open:a,onOpenChange:h,teamMembers:t}){const l=()=>{h(!1)};return e.jsx(z,{open:a,onOpenChange:l,children:e.jsxs(O,{className:"flex max-h-[90vh] flex-col sm:max-w-4xl",children:[e.jsxs(H,{className:"shrink-0",children:[t?t.length>0?e.jsxs(M,{className:"text-2xl font-semibold",children:[t?.[0].type===E.SHOP&&"View Shop Team",t?.[0].type===E.DEALERSHIP&&"View Dealer Team",t?.[0].type===E.CSR&&"View CSR Team",t?.[0].type===E.FIELD_STAFF&&"View Field Staff Team"]}):e.jsx(M,{className:"text-2xl font-semibold",children:"View Team"}):null,e.jsx(V,{}),e.jsxs("button",{onClick:l,className:"focus:ring-ring absolute top-4 right-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-none",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]}),e.jsxs("div",{className:"flex-1 space-y-8 overflow-y-auto scroll-smooth py-6",children:[e.jsxs("section",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-3 text-lg font-medium",children:[e.jsx(ve,{className:"text-foreground h-6 w-6"}),e.jsx("h3",{children:"Shop Information"})]}),e.jsxs("div",{className:"bg-muted/50 grid grid-cols-1 gap-6 rounded-lg p-5 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Name"}),e.jsxs("p",{className:"mt-1 text-base font-semibold",children:[t?.[0]?.firstName," ",t?.[0]?.lastName]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Shop #"}),e.jsx("p",{className:"mt-1 text-base font-semibold",children:t?.[0]?.shop?.shopNumber})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Location"}),e.jsx("p",{className:"mt-1 text-base font-semibold",children:t?.[0]?.shop?.address})]})]})]}),e.jsx(V,{}),e.jsxs("section",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-3 text-lg font-medium",children:[e.jsx(U,{className:"text-foreground h-6 w-6"}),e.jsx("h3",{children:"Team Members"})]}),e.jsx("div",{className:"overflow-hidden rounded-lg border",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"First Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Last Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Date Added"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Date Last Accessed"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Status"})]})}),e.jsx("tbody",{className:"divide-border divide-y",children:t&&t?.length>0&&t.map((n,s)=>e.jsxs("tr",{className:"hover:bg-muted/30 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 text-sm",children:n.firstName}),e.jsx("td",{className:"px-4 py-4 text-sm",children:n.lastName}),e.jsx("td",{className:"text-muted-foreground px-4 py-4 font-mono text-sm",children:n.email}),e.jsx("td",{className:"px-4 py-4 text-sm",children:n.dateCreated&&new Date(n.dateCreated).toLocaleDateString()||"--"}),e.jsx("td",{className:"px-4 py-4 text-sm",children:n.dateLastAccess&&new Date(n.dateLastAccess).toLocaleDateString()||"--"}),e.jsxs("td",{className:"px-4 py-4 text-sm",children:[n.status===F.PENDING&&e.jsx(_,{variant:"destructive",className:"text-xs",children:"Pending Approval"}),n.status===F.REGISTRATION_REQUESTED&&e.jsx(_,{variant:"destructive",className:"text-xs",children:"Registration Requested"}),n.status===F.ACTIVE&&e.jsx(_,{variant:"outline",className:"text-xs",children:"Active"}),n.status===F.INACTIVE&&e.jsx(_,{variant:"secondary",className:"text-xs",children:"Inactive"})]})]},s))})]})})]})]}),e.jsx("div",{className:"-mx-6 flex-1 overflow-y-auto scroll-smooth px-6 py-4"}),e.jsx(B,{className:"mt-4 flex-shrink-0 gap-3 border-t pt-4",children:e.jsx(f,{onClick:l,children:"Close"})})]})})}function Ue({className:a,fixed:h,isShowUser:t=!0,...l}){const n=se(),{auth:s}=te(),[I,u]=N.useState(!1),[o,g]=N.useState(!1),[j,y]=N.useState(!1),[T,q]=N.useState([]),r=async()=>{const c=s.user?.person?.type===E.PROGRAM_ADMINISTRATOR;try{const v=new R,m=re.create({type:c?"Network":s.user?.person?.type,organizationId:s.user?.person?.type==="Shop"?s.user?.person?.shop?.id:s.user?.person?.type==="Dealership"?s.user?.person?.dealership?.id:void 0});v.search(m,{status200:x=>{c?y(!0):g(!0),q(x.persons)},error:x=>{},else:(x,_e)=>{}})}catch{}},i=c=>{switch(c){case"team":r();break;case"profile":u(!0);break;case"logout":d();break}},d=()=>{new ae().logout({status200:()=>{s.reset(),n.navigate({to:"/login"})}})};return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:`bg-header fixed top-0 right-0 left-0 z-50 flex h-16 w-full items-center justify-between px-6 text-white ${a||""} `,...l,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:Ce,alt:"Audi",className:"hover: h-20 w-20 cursor-pointer object-contain",onClick:()=>n.navigate({to:"/"})}),e.jsxs("div",{children:[e.jsx("span",{className:"mr-2 text-sm font-medium text-red-500",children:"Audi"}),e.jsx("span",{className:"text-sm font-medium text-white",children:"Restricted Parts Tracker."})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[t&&e.jsxs(Q,{children:[e.jsx(X,{asChild:!0,children:e.jsxs("button",{className:"flex items-center justify-center gap-3 rounded-full pr-2 transition-colors hover:bg-white/10",children:[e.jsxs("div",{className:"text-left text-white",children:[e.jsx("p",{className:"text-sm leading-none font-medium",children:s.user?`${s.user.person?.firstName} ${s.user.person?.lastName}`.trim()||s.user.person?.email:"User"}),e.jsx("p",{className:"text-xs text-gray-400",children:s.user?s.user.person?.shop?.name&&s.user.person?.shop?.shopNumber?`${s.user.person?.shop?.name}(${s.user.person?.shop?.shopNumber}) | ${s.user.person?.type}`:s.user.person?.dealership?.name&&s.user.person?.dealership?.dealershipNumber?`${s.user.person?.dealership?.name}(${s.user.person?.dealership?.dealershipNumber}) | ${s.user.person?.type}`:s.user.person?.type:"Not logged in"})]}),e.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),e.jsxs(J,{align:"end",className:"mt-2 w-56",children:[e.jsx(ne,{className:"font-normal",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:s.user?`${s.user.person?.firstName} ${s.user.person?.lastName}`.trim()||s.user.person?.email:"User"}),e.jsx("p",{className:"text-muted-foreground text-xs",children:s.user?s.user.person?.shop?.name&&s.user.person?.shop?.shopNumber?`${s.user.person?.shop?.name}(${s.user.person?.shop?.shopNumber}) | ${s.user.person?.type}`:s.user.person?.dealership?.name&&s.user.person?.dealership?.dealershipNumber?`${s.user.person?.dealership?.name}(${s.user.person?.dealership?.dealershipNumber}) | ${s.user.person?.type}`:s.user.person?.type:"Not logged in"})]})}),e.jsx(W,{}),e.jsxs($,{className:"cursor-pointer",onSelect:()=>i("team"),children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"View Team"})]}),e.jsxs($,{className:"cursor-pointer",onSelect:()=>i("profile"),children:[e.jsx(ke,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Edit Profile"})]}),e.jsx(W,{}),e.jsxs($,{className:"cursor-pointer text-red-600 focus:text-red-600",onSelect:()=>i("logout"),children:[e.jsx(ue,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Logout"})]})]})]}),e.jsx("div",{className:"rounded-full p-2 text-white transition-colors hover:bg-white/10",children:e.jsx(Te,{})})]})]}),e.jsx(Ie,{open:I,onOpenChange:u}),e.jsx(Le,{teamMembers:T,open:o,onOpenChange:g}),e.jsx(De,{teamMembers:T,open:j,onOpenChange:y,onSuccess:r,onError:c=>{}})]})}export{de as C,xe as G,Ue as H,fe as L,ve as S,Pe as U,U as a};
