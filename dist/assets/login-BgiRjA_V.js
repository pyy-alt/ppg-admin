import{u as C,n as E,b as P,h as R,r as n,j as e,o as I,L as q,B as F,t as i,y as $,A as B}from"./index-DiI2ffAh.js";import{u as D,M}from"./use-redirect-if-authenticated-DV2gDl6C.js";import{C as U}from"./checkbox-DnhwHROs.js";import{I as y}from"./input-anrjtq5m.js";import{L as p}from"./form-BztM4JIr.js";import{H as z,L as H}from"./header-BJ4bOhv6.js";import{E as W,a as _}from"./eye-Depk1M7T.js";import"./Loading-QGL_XBaH.js";import"./index-B9OW1ajA.js";import"./index-I18K8_cQ.js";import"./index-lW_6OgVn.js";import"./check-Ca0fbDYF.js";import"./PersonApi-CgbCoTOu.js";import"./dropdown-menu-DS9Dg1PJ.js";import"./index-BesrJGlS.js";import"./Combination-D_vfDq5J.js";import"./index-B0ORnztA.js";import"./index-DTR4e_QT.js";import"./chevron-right-B2dPWAbi.js";import"./dialog-BfbMbQ8-.js";import"./x-DoFJH5Nd.js";import"./separator-unOUWFl-.js";import"./badge-CmxtL1uP.js";function O(){const{redirect:l,region:b}=C({from:"/(auth)/login"}),f=E("login",b==="canada"?"_c.png":"_a.png"),j=P(),{auth:N}=R(),[s,t]=n.useState(!1),[c,w]=n.useState(""),[u,v]=n.useState(""),[x,L]=n.useState(!1),{isLoading:S,LoadingComponent:h}=D(),[k,a]=n.useState(!1);if(S&&h)return e.jsx(h,{});const A=async r=>{if(r.preventDefault(),r.stopPropagation(),!(s||k)){if(!c||!u){i.error("Please enter email and password");return}a(!0),t(!0);try{const m=new $;m.email=c.trim(),m.password=u,new B().login(m,{status200:o=>{if(!o){i.error("Invalid session data"),t(!1),a(!1);return}N.setUser(o),i.success(`Welcome back, ${o.person?.firstName||c}!`),t(!1),a(!1);let d="/";if(l)try{const g=new URL(l);d=g.pathname+g.search}catch{d=l.startsWith("/")?l:`/${l}`}j({to:d,replace:!0})},error:o=>{i.error(`Network error, please try again ${o.message}`),t(!1),a(!1)},else:(o,d)=>{i.error("Network error, please try again"),t(!1),a(!1)}},null)}catch{i.error("An unexpected error occurred"),t(!1),a(!1)}}};return e.jsxs("div",{className:"bg-background flex min-h-screen flex-col",children:[e.jsx(z,{isShowUser:!1}),e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsx("div",{className:"flex flex-col items-center justify-center px-6 py-12 lg:py-16",style:{backgroundImage:`url(${I})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:f?e.jsx("img",{loading:"lazy",src:f,alt:"logo",className:"mx-auto h-36 w-auto max-w-lg space-y-8 text-center drop-shadow-xl lg:h-56"}):null}),e.jsx("div",{className:"flex flex-1 items-start justify-center px-1 py-2 lg:py-12",children:e.jsxs("div",{className:"w-full max-w-md p-8 lg:p-10",children:[e.jsx("h2",{className:"text-primary mb-10 text-center text-3xl font-bold lg:text-4xl",children:"Login"}),e.jsxs("form",{className:"space-y-7",onSubmit:A,children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(p,{htmlFor:"email",className:"text-muted-foreground text-base font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"text-muted-foreground absolute top-1/2 left-4 h-5 w-5 -translate-y-1/2"}),e.jsx(y,{id:"email",type:"email",placeholder:"Enter your email",className:"text-muted-foreground h-14 rounded-full border-gray-300 pl-12 text-base focus:border-cyan-500 focus:ring-2 focus:ring-cyan-100",value:c,onChange:r=>w(r.target.value),required:!0,disabled:s})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(p,{htmlFor:"password",className:"text-muted-foreground text-base font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute top-1/2 left-4 h-5 w-5 -translate-y-1/2 text-gray-400"}),e.jsx(y,{id:"password",type:x?"text":"password",placeholder:"Enter your password",className:"text-muted-foreground h-14 rounded-full border-gray-300 pr-12 pl-12 text-base focus:border-cyan-500 focus:ring-2 focus:ring-cyan-100",value:u,onChange:r=>v(r.target.value),required:!0,disabled:s}),e.jsx("button",{type:"button",onClick:()=>L(!x),className:"absolute top-1/2 right-4 -translate-y-1/2 hover:text-gray-700",disabled:s,children:x?e.jsx(W,{className:"h-5 w-5"}):e.jsx(_,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{id:"remember",disabled:s,className:"bg-muted cursor-pointer"}),e.jsx(p,{htmlFor:"remember",className:"cursor-pointer font-normal text-gray-600",children:"Remember Me"})]}),e.jsx(q,{to:"/password/forgot",className:"font-medium text-red-600 transition-colors hover:text-red-700",children:"Forgot password"})]}),e.jsx(F,{type:"submit",className:"text-muted h-14 w-full rounded-full text-base font-semibold shadow-md transition-all hover:bg-gray-900",disabled:s,children:s?"Logging in...":"Log in"})]}),e.jsxs("div",{className:"mt-10 text-center text-sm text-gray-600",children:[e.jsx("p",{className:"mb-3",children:"Don't have an account?"}),e.jsxs("div",{className:"flex justify-center gap-8",children:[e.jsx("a",{href:"/registration/shop",className:"font-medium text-cyan-600 transition-colors hover:text-cyan-700",children:"Register as Shop"}),e.jsx("a",{href:"/registration/dealership",className:"font-medium text-cyan-600 transition-colors hover:text-cyan-700",children:"Register as Dealer"})]})]})]})})]})]})}const he=O;export{he as component};
