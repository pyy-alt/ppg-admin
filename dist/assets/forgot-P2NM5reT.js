import{i as f,e as h,b as y,r as o,A as b,j as e,k as j,B as v,F as w,t as i}from"./index-C42HdEAO.js";import{u as N,M as S}from"./use-redirect-if-authenticated-D4i8U_hV.js";import{I as k}from"./input-xhzhTNVG.js";import{H as A}from"./header-DRs42Vp_.js";import"./Loading-snV3B40Z.js";import"./dropdown-menu-vy7RPfPt.js";import"./index-DhRU68Sr.js";import"./index-aWiEp8L1.js";import"./Combination-BxR3-cqx.js";import"./index-BtDNtm75.js";import"./index-9qar58Re.js";import"./index-BLiGQKRh.js";import"./check-BsQ3GXk8.js";import"./chevron-right-DUehkqfC.js";import"./form-B2zkyAOu.js";import"./label-B94-SQNf.js";import"./dialog-Do1388aj.js";import"./x-BIvBkc1L.js";import"./separator-DAWsWUQa.js";import"./user-Bvc95aWY.js";import"./badge-BkdkAdIK.js";const m=new b;function P(){const l=f("login","_a.png"),u=h(),{auth:t}=y(),[s,n]=o.useState(!1),[a,p]=o.useState(""),{isLoading:g,LoadingComponent:c}=N();o.useEffect(()=>{t.loginStatus==="authenticated"?m.logout({status200:()=>{t.reset()},error:()=>{t.reset()}}):t.reset()},[]);const x=async r=>{r.preventDefault(),n(!0);try{const d=w.create({email:a});m.forgotPassword(d,{status200:()=>{i.success(`Password reset link has been sent to ${a}`),u({to:"/login"})},error:()=>{i.error("Failed to send reset link. Please try again.")}})}catch{i.error("Failed to send reset link. Please try again.")}finally{n(!1)}};return g&&c?e.jsx(c,{}):e.jsxs("div",{className:"flex min-h-screen flex-col bg-background",children:[e.jsx(A,{isShowUser:!1}),e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsx("div",{className:"flex flex-col items-center justify-center px-6 py-12 lg:py-16",style:{backgroundImage:`url(${j})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:e.jsx("div",{className:"max-w-lg space-y-8 text-center",children:l?e.jsx("img",{loading:"lazy",src:l,alt:"Audi Authorized Collision Repair",className:"mx-auto h-36 w-auto drop-shadow-xl lg:h-56"}):null})}),e.jsx("div",{className:"flex flex-1 items-start justify-center bg-card px-1 py-2 lg:py-12",children:e.jsxs("div",{className:"w-full max-w-md p-8 lg:p-10",children:[e.jsx("h2",{className:"mb-4 text-center text-3xl font-bold text-foreground lg:text-4xl",children:"Forgot Password"}),e.jsxs("form",{onSubmit:x,className:"space-y-7",children:[e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"relative my-10",children:[e.jsx(S,{className:"absolute top-1/2 left-4 h-5 w-5 -translate-y-1/2 text-muted-foreground"}),e.jsx(k,{id:"email",type:"email",placeholder:"Enter your email",className:"h-14 rounded-full border-gray-300 pl-12 text-base focus:border-cyan-500 focus:ring-2 focus:ring-cyan-100",value:a,onChange:r=>p(r.target.value),required:!0,disabled:s})]})}),e.jsx(v,{type:"submit",variant:"default",className:"h-14 w-full rounded-full text-base font-semibold shadow-md transition-all",disabled:s,children:s?"Sending...":"Send Reset Link"})]})]})})]})]})}const V=P;export{V as component};
