import{h as F,r as l,j as e,B as U,w as H,aB as q}from"./index-DiI2ffAh.js";import{O as z}from"./OrganizationApi-C5kJOLq0.js";import{B as L}from"./badge-CmxtL1uP.js";import{E as M,a as W,b as $,T as G,c as J,d as K,D as Q}from"./data-table-pagination-BYSKvq0r.js";import{I as X}from"./input-anrjtq5m.js";import{S as b,a as N,b as S,c as v,d as a}from"./select-BfIdXsKN.js";import{T as Y,a as Z,b as T,c as t,d as _,e as r}from"./table-DfggTbkb.js";import{D as ee}from"./download-CTZAi_Qa.js";import{S as se}from"./search-Dee6z3yd.js";import"./chevron-left-CVoIS1tR.js";import"./chevron-right-B2dPWAbi.js";import"./index-DHosPbdR.js";import"./index-B9OW1ajA.js";import"./index-BesrJGlS.js";import"./Combination-D_vfDq5J.js";import"./index-B0ORnztA.js";import"./index-I18K8_cQ.js";import"./chevron-down-kGCTDs5u.js";import"./check-Ca0fbDYF.js";function te(){const{user:i}=F(s=>s.auth),[c,y]=l.useState(1),[m,P]=l.useState(""),[u,A]=l.useState("all"),[x,I]=l.useState("all"),[h,R]=l.useState("all"),[C,E]=l.useState([]),[w,D]=l.useState(0),[O,d]=l.useState(!1),f=20,V=Math.ceil(w/f),B=async()=>{if(i){d(!0);try{const s=new z,n={type:"Shop",smartFilter:m,filterByRegionId:h&&parseInt(h)};u!=="all"&&(n.filterByShopStatus=u),x!=="all"&&(n.filterByShopCertification=x);const j=H.create({resultsLimitOffset:(c-1)*f,resultsLimitCount:f,resultsOrderBy:"Name",resultsOrderAscending:!1});n.resultParameter=j;const g=q.create(n);s.search(g,{status200:o=>{E(o.organizations||[]),D(o.totalItemCount||0),d(!1)},error:o=>{d(!1)},status403:o=>{d(!1)}})}catch{d(!1)}}};return l.useEffect(()=>{if(!i)return;y(1);const s=setTimeout(()=>{B()},m?500:0);return()=>clearTimeout(s)},[m,u,x,h,i]),l.useEffect(()=>{!i||c===1||B()},[c,i]),e.jsxs("div",{className:"bg-background min-h-screen",children:[e.jsx("div",{className:"bg-background",children:e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsx("h1",{className:"text-foreground text-2xl font-bold",children:"Manage Shops"}),e.jsxs(U,{children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Report"]})]})}),e.jsxs("div",{className:"px-6 py-6",children:[e.jsxs("div",{className:"mb-6 flex flex-col gap-4 lg:flex-row lg:items-center",children:[e.jsxs("div",{className:"relative max-w-md flex-1",children:[e.jsx(se,{className:"text-muted-foreground absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2"}),e.jsx(X,{value:m,onChange:s=>P(s.target.value),placeholder:"Filter by Name, #, City",className:"pl-10"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs(b,{value:u,onValueChange:s=>A(s),children:[e.jsx(N,{className:"bg-muted w-48",children:e.jsx(S,{placeholder:"Status"})}),e.jsxs(v,{children:[e.jsx(a,{value:"all",children:"All Status"}),e.jsx(a,{value:"Certified",children:"Certified"}),e.jsx(a,{value:"Closed",children:"Closed"}),e.jsx(a,{value:"InProcess",children:"In-Process"}),e.jsx(a,{value:"Suspended",children:"Suspended"}),e.jsx(a,{value:"Terminated",children:"Terminated"})]})]}),e.jsxs(b,{value:x,onValueChange:s=>I(s),children:[e.jsx(N,{className:"bg-muted w-48",children:e.jsx(S,{placeholder:"Certification"})}),e.jsxs(v,{children:[e.jsx(a,{value:"all",children:"All Certifications"}),e.jsx(a,{value:"AudiUltra",children:"Audi Ultra"}),e.jsx(a,{value:"AudiHybrid",children:"Audi Hybrid"}),e.jsx(a,{value:"VW",children:"Volkswagen"})]})]}),e.jsxs(b,{value:h,onValueChange:s=>R(s),children:[e.jsx(N,{className:"bg-muted w-48",children:e.jsx(S,{placeholder:"CSR Region"})}),e.jsxs(v,{children:[e.jsx(a,{value:"all",children:"All Regions"}),i?.regions?.map(s=>e.jsx(a,{value:s.id?.toString()||"",children:s.name},s.id))]})]})]})]}),O?e.jsx("div",{className:"bg-background overflow-hidden rounded-lg border shadow-sm",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"text-muted-foreground",children:"loading..."})})}):C.length===0?e.jsx("div",{className:"bg-background overflow-hidden rounded-lg border shadow-sm",children:e.jsx(M,{children:e.jsxs(W,{children:[e.jsx($,{variant:"icon",children:e.jsx(G,{className:"h-4 w-4"})}),e.jsx(J,{children:"No data to display"}),e.jsx(K,{children:"There are no records in this table yet. Add your first entry to get started."})]})})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-background overflow-hidden rounded-lg border shadow-sm",children:e.jsxs(Y,{children:[e.jsx(Z,{children:e.jsxs(T,{className:"bg-muted",children:[e.jsx(t,{className:"text-foreground font-semibold",children:"Name"}),e.jsx(t,{className:"text-foreground font-semibold",children:"Number"}),e.jsx(t,{className:"text-foreground font-semibold",children:"# of Pending Orders"}),e.jsx(t,{className:"text-foreground font-semibold",children:"# of Active Users"}),e.jsx(t,{className:"text-foreground font-semibold",children:"# of Pending Users"}),e.jsx(t,{className:"text-foreground font-semibold",children:"Status"}),e.jsx(t,{className:"text-foreground font-semibold",children:"Certification"}),e.jsx(t,{className:"text-foreground font-semibold",children:"Address"}),e.jsx(t,{className:"text-foreground font-semibold",children:"City"}),e.jsx(t,{className:"text-foreground font-semibold",children:"State"}),e.jsx(t,{className:"text-foreground font-semibold",children:"Dealer"}),e.jsx(t,{className:"text-foreground font-semibold",children:"Dealer #"}),e.jsx(t,{className:"text-foreground font-semibold",children:"Region"})]})}),e.jsx(_,{children:C.map(s=>{const n=s.sponsorDealership,j=n?.name||"--",g=n?.dealershipNumber||"--",o=s.region?.name||"--",p=s.filterByShopStatus||"--",k=s.filterByShopCertification||"--";return e.jsxs(T,{className:"hover:bg-background",children:[e.jsx(r,{className:"font-medium text-blue-600",children:e.jsx("span",{className:"cursor-pointer hover:underline",children:s.name||"--"})}),e.jsx(r,{children:s.shopNumber||"--"}),e.jsx(r,{className:"text-center font-medium",children:s.countPendingOrders??0}),e.jsx(r,{className:"text-center",children:s.countActiveUsers??0}),e.jsx(r,{className:"text-center",children:s.countPendingUsers??0}),e.jsx(r,{children:e.jsx(L,{variant:p==="certified"?"default":"secondary",className:p==="certified"?"bg-green-100 text-green-800 hover:bg-green-200":"",children:p})}),e.jsx(r,{children:k}),e.jsx(r,{className:"text-muted-foreground text-sm",children:s.address||"--"}),e.jsx(r,{children:s.city||"--"}),e.jsx(r,{children:s.state||"--"}),e.jsx(r,{children:j}),e.jsx(r,{children:g}),e.jsx(r,{children:o})]},s.id)})})]})}),e.jsx(Q,{currentPage:c,totalPages:V,totalItems:w,itemsPerPage:f,onPageChange:y})]})]})]})}const ve=te;export{ve as component};
