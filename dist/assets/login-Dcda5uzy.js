import{u as C,d as P,o as R,b as E,i as I,r as l,j as e,p as q,L as B,B as D,t as i,D as F,A as $}from"./index-Bkm0i40-.js";import{u as M,M as U}from"./use-redirect-if-authenticated-Dm2KpALQ.js";import{C as z}from"./checkbox-s4dkUmJo.js";import{I as b}from"./input-DaKq_e4d.js";import{L as x}from"./label-BN8Qe8K3.js";import{H,L as W}from"./header-Vf3flhB_.js";import{E as _,a as O}from"./eye-BEY6uIFQ.js";import"./Loading-Z72NCMiE.js";import"./index-CnmrjRy4.js";import"./index-Dti7BYom.js";import"./index-B51CDgwY.js";import"./index-BeLrdImO.js";import"./check-BRFXV1aI.js";import"./PersonApi-BZdXp9je.js";import"./ViewTeamDialog-CoFVDWax.js";import"./badge-MEVRXxP2.js";import"./dialog-DSGLXfvZ.js";import"./index-CN5U3HPo.js";import"./Combination-K-YKTF--.js";import"./x-CsoNbFna.js";import"./separator-Bthd58uT.js";import"./users-uvAbHv3x.js";import"./dropdown-menu-BJ11OL3K.js";import"./index-Dt-JkpPh.js";import"./index-CM-w1TYN.js";import"./index-tCO809zo.js";import"./chevron-right-C97o7tEJ.js";import"./form-FwhVnNbA.js";function G(){const{redirect:n}=C({from:"/(auth)/login"}),{region:y}=P(),f=R("login",y==="canada"?"_c.png":"_a.png"),j=E(),{auth:N}=I(),[s,t]=l.useState(!1),[c,w]=l.useState(""),[u,v]=l.useState(""),[p,L]=l.useState(!1),{isLoading:S,LoadingComponent:g}=M(),[k,a]=l.useState(!1);if(S&&g)return e.jsx(g,{});const A=async r=>{if(r.preventDefault(),r.stopPropagation(),!(s||k)){if(!c||!u){i.error("Please enter email and password");return}a(!0),t(!0);try{const m=new F;m.email=c.trim(),m.password=u,new $().login(m,{status200:o=>{if(!o){i.error("Invalid session data"),t(!1),a(!1);return}N.setUser(o),i.success(`Welcome back, ${o.person?.firstName||c}!`),t(!1),a(!1);let d="/";if(n)try{const h=new URL(n);d=h.pathname+h.search}catch{d=n.startsWith("/")?n:`/${n}`}j({to:d,replace:!0})},error:o=>{i.error(`Network error, please try again ${o.message}`),t(!1),a(!1)},else:(o,d)=>{i.error("Network error, please try again"),t(!1),a(!1)}},null)}catch{i.error("An unexpected error occurred"),t(!1),a(!1)}}};return e.jsxs("div",{className:"bg-background flex min-h-screen flex-col",children:[e.jsx(H,{isShowUser:!1}),e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsx("div",{className:"flex flex-col items-center justify-center px-6 py-12 lg:py-16",style:{backgroundImage:`url(${q})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:f?e.jsx("img",{loading:"lazy",src:f,alt:"logo",className:"mx-auto h-36 w-auto max-w-lg space-y-8 text-center drop-shadow-xl lg:h-56"}):null}),e.jsx("div",{className:"flex flex-1 items-start justify-center px-1 py-2 lg:py-12",children:e.jsxs("div",{className:"w-full max-w-md p-8 lg:p-10",children:[e.jsx("h2",{className:"text-primary mb-10 text-center text-3xl font-bold lg:text-4xl",children:"Login"}),e.jsxs("form",{className:"space-y-7",onSubmit:A,children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(x,{htmlFor:"email",className:"text-muted-foreground text-base font-medium"}),e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"text-muted-foreground absolute top-1/2 left-4 h-5 w-5 -translate-y-1/2"}),e.jsx(b,{id:"email",type:"email",placeholder:"Email  Address",className:"text-muted-foreground h-12 rounded-full border-gray-300 pl-12 text-base focus:border-cyan-500 focus:ring-2 focus:ring-cyan-100",value:c,onChange:r=>w(r.target.value),required:!0,disabled:s})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(x,{htmlFor:"password",className:"text-muted-foreground text-base font-medium"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"absolute top-1/2 left-4 h-5 w-5 -translate-y-1/2 text-gray-400"}),e.jsx(b,{id:"password",type:p?"text":"password",placeholder:"Password",className:"text-muted-foreground h-12 rounded-full border-gray-300 pr-12 pl-12 text-base focus:border-cyan-500 focus:ring-2 focus:ring-cyan-100",value:u,onChange:r=>v(r.target.value),required:!0,disabled:s}),e.jsx("button",{type:"button",onClick:()=>L(!p),className:"absolute top-1/2 right-4 -translate-y-1/2 hover:text-gray-700",disabled:s,children:p?e.jsx(_,{className:"h-5 w-5"}):e.jsx(O,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{id:"remember",disabled:s,className:"bg-muted cursor-pointer"}),e.jsx(x,{htmlFor:"remember",className:"cursor-pointer font-normal text-gray-600",children:"Remember Me"})]}),e.jsx(B,{to:"/password/forgot",className:"font-medium text-red-600 underline transition-colors hover:text-red-700",children:"Forgot password"})]}),e.jsx(D,{type:"submit",className:"text-muted h-14 w-full rounded-full text-base font-semibold shadow-md transition-all hover:bg-gray-900",disabled:s,children:s?"Logging in...":"Log in"})]}),e.jsxs("div",{className:"mt-10 text-center text-sm text-gray-600",children:[e.jsx("p",{className:"mb-3",children:"Don't have an account?"}),e.jsxs("div",{className:"flex justify-center gap-8",children:[e.jsx("a",{href:"/registration/shop",className:"font-medium text-cyan-600 underline transition-colors hover:text-cyan-700",children:"Register as Shop"}),e.jsx("a",{href:"/registration/dealership",className:"font-medium text-cyan-600 underline transition-colors hover:text-cyan-700",children:"Register as Dealer"})]})]})]})})]})]})}const we=G;export{we as component};
