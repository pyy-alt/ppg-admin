import{h as F,r as l,j as e,B as U,aL as H,aA as L}from"./index-bZPt74SL.js";import{O as q}from"./OrganizationApi-DLOiAKOQ.js";import{B as z}from"./badge-B483Njh1.js";import{E as M,a as W,b as $,T as G,c as J,d as K,D as Q}from"./data-table-pagination-DFlv6pI_.js";import{I as X}from"./input-W45EOFir.js";import{S as b,a as N,b as S,c as v,d as a}from"./select-iVvteLym.js";import{T as Y,a as Z,b as B,c as t,d as _,e as r}from"./table-CDOYvhfH.js";import{D as ee}from"./download-CSF5e3oF.js";import{S as se}from"./search-DHWuWzUR.js";import"./chevron-left-BFQH7A4v.js";import"./chevron-right-BMMQv83b.js";import"./index-BDNPEbHM.js";import"./index-BAv-q7Sn.js";import"./index-B5XdlCk6.js";import"./Combination-C2X8UjKH.js";import"./index-BMiWLKrh.js";import"./index-DQajRILt.js";import"./chevron-down-DacainfD.js";import"./check-D9nIkqgl.js";function te(){const{user:o}=F(s=>s.auth),[f,y]=l.useState(1),[c,P]=l.useState(""),[m,A]=l.useState("all"),[u,I]=l.useState("all"),[x,R]=l.useState("all"),[C,E]=l.useState([]),[w,D]=l.useState(0),[O,d]=l.useState(!1),h=20,V=Math.ceil(w/h),T=async()=>{if(o){d(!0);try{const s=new q,n={type:"Shop",smartFilter:c,filterByRegionId:x&&parseInt(x)};m!=="all"&&(n.filterByShopStatus=m),u!=="all"&&(n.filterByShopCertification=u);const j=H.create({resultsLimitOffset:(f-1)*h,resultsLimitCount:h,resultsOrderBy:"Name",resultsOrderAscending:!0});n.resultParameter=j;const g=L.create(n);s.search(g,{status200:i=>{E(i.organizations||[]),D(i.totalItemCount||0),d(!1)},error:i=>{d(!1)},status403:i=>{d(!1)}})}catch{d(!1)}}};return l.useEffect(()=>{if(!o)return;y(1);const s=setTimeout(()=>{T()},c?500:0);return()=>clearTimeout(s)},[c,m,u,x,o]),l.useEffect(()=>{o&&T()},[f]),e.jsxs("div",{className:"bg-background min-h-screen",children:[e.jsx("div",{className:"bg-background",children:e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsx("h1",{className:"text-foreground text-2xl font-bold",children:"Manage Shops"}),e.jsxs(U,{children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Report"]})]})}),e.jsxs("div",{className:"px-6 py-6",children:[e.jsxs("div",{className:"mb-6 flex flex-col gap-4 lg:flex-row lg:items-center",children:[e.jsxs("div",{className:"relative max-w-md flex-1",children:[e.jsx(se,{className:"text-muted-foreground absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2"}),e.jsx(X,{value:c,onChange:s=>P(s.target.value),placeholder:"Filter by Name, #, City",className:"pl-10"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs(b,{value:m,onValueChange:s=>A(s),children:[e.jsx(N,{className:"bg-muted w-48",children:e.jsx(S,{placeholder:"Status"})}),e.jsxs(v,{children:[e.jsx(a,{value:"all",children:"All Status"}),e.jsx(a,{value:"Certified",children:"Certified"}),e.jsx(a,{value:"Closed",children:"Closed"}),e.jsx(a,{value:"InProcess",children:"In-Process"}),e.jsx(a,{value:"Suspended",children:"Suspended"}),e.jsx(a,{value:"Terminated",children:"Terminated"})]})]}),e.jsxs(b,{value:u,onValueChange:s=>I(s),children:[e.jsx(N,{className:"bg-muted w-48",children:e.jsx(S,{placeholder:"Certification"})}),e.jsxs(v,{children:[e.jsx(a,{value:"all",children:"All Certifications"}),e.jsx(a,{value:"AudiUltra",children:"Audi Ultra"}),e.jsx(a,{value:"AudiHybrid",children:"Audi Hybrid"}),e.jsx(a,{value:"VW",children:"Volkswagen"})]})]}),e.jsxs(b,{value:x,onValueChange:s=>R(s),children:[e.jsx(N,{className:"bg-muted w-48",children:e.jsx(S,{placeholder:"CSR Region"})}),e.jsxs(v,{children:[e.jsx(a,{value:"all",children:"All Regions"}),o?.regions?.map(s=>e.jsx(a,{value:s.id?.toString()||"",children:s.name},s.id))]})]})]})]}),O?e.jsx("div",{className:"bg-background overflow-hidden rounded-lg border shadow-sm",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"text-muted-foreground",children:"loading..."})})}):C.length===0?e.jsx("div",{className:"bg-background overflow-hidden rounded-lg border shadow-sm",children:e.jsx(M,{children:e.jsxs(W,{children:[e.jsx($,{variant:"icon",children:e.jsx(G,{className:"h-4 w-4"})}),e.jsx(J,{children:"No data to display"}),e.jsx(K,{children:"There are no records in this table yet. Add your first entry to get started."})]})})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-background overflow-hidden rounded-lg border shadow-sm",children:e.jsxs(Y,{children:[e.jsx(Z,{children:e.jsxs(B,{className:"bg-muted",children:[e.jsx(t,{className:"text-foreground font-semibold",children:"Name"}),e.jsx(t,{className:"text-foreground font-semibold",children:"Number"}),e.jsx(t,{className:"text-foreground font-semibold",children:"# of Pending Orders"}),e.jsx(t,{className:"text-foreground font-semibold",children:"# of Active Users"}),e.jsx(t,{className:"text-foreground font-semibold",children:"# of Pending Users"}),e.jsx(t,{className:"text-foreground font-semibold",children:"Status"}),e.jsx(t,{className:"text-foreground font-semibold",children:"Certification"}),e.jsx(t,{className:"text-foreground font-semibold",children:"Address"}),e.jsx(t,{className:"text-foreground font-semibold",children:"City"}),e.jsx(t,{className:"text-foreground font-semibold",children:"State"}),e.jsx(t,{className:"text-foreground font-semibold",children:"Dealer"}),e.jsx(t,{className:"text-foreground font-semibold",children:"Dealer #"}),e.jsx(t,{className:"text-foreground font-semibold",children:"Region"})]})}),e.jsx(_,{children:C.map(s=>{const n=s.sponsorDealership,j=n?.name||"--",g=n?.dealershipNumber||"--",i=s.region?.name||"--",p=s.filterByShopStatus||"--",k=s.filterByShopCertification||"--";return e.jsxs(B,{className:"hover:bg-background",children:[e.jsx(r,{className:"font-medium text-blue-600",children:e.jsx("span",{className:"cursor-pointer hover:underline",children:s.name||"--"})}),e.jsx(r,{children:s.shopNumber||"--"}),e.jsx(r,{className:"text-center font-medium",children:s.countPendingOrders??0}),e.jsx(r,{className:"text-center",children:s.countActiveUsers??0}),e.jsx(r,{className:"text-center",children:s.countPendingUsers??0}),e.jsx(r,{children:e.jsx(z,{variant:p==="certified"?"default":"secondary",className:p==="certified"?"bg-green-100 text-green-800 hover:bg-green-200":"",children:p})}),e.jsx(r,{children:k}),e.jsx(r,{className:"text-muted-foreground text-sm",children:s.address||"--"}),e.jsx(r,{children:s.city||"--"}),e.jsx(r,{children:s.state||"--"}),e.jsx(r,{children:j}),e.jsx(r,{children:g}),e.jsx(r,{children:i})]},s.id)})})]})}),e.jsx(Q,{currentPage:f,totalPages:V,totalItems:w,itemsPerPage:h,onPageChange:y})]})]})]})}const ve=te;export{ve as component};
