import{b as u,r as n,d as g,j as e,e as x,f as h,v as b,g as R,h as j,i as w,k as _,l as v,O as C}from"./index-Bkm0i40-.js";import{L as c}from"./Loading-Z72NCMiE.js";import{A}from"./authenticated-layout-CA314utD.js";import{H as N}from"./header-only-layout-DIMOGv9B.js";import{G as S}from"./header-Vf3flhB_.js";import"./search-provider-Ch1B4iWn.js";import"./command-DLpKp-qg.js";import"./dialog-DSGLXfvZ.js";import"./index-CnmrjRy4.js";import"./index-CN5U3HPo.js";import"./Combination-K-YKTF--.js";import"./index-BeLrdImO.js";import"./x-CsoNbFna.js";import"./search-BInq9IsI.js";import"./ViewTeamDialog-CoFVDWax.js";import"./badge-MEVRXxP2.js";import"./separator-Bthd58uT.js";import"./users-uvAbHv3x.js";import"./building-2-jFbUc3tZ.js";import"./scroll-area-Cgs0ge7_.js";import"./index-ChYaYNrd.js";import"./chevron-right-C97o7tEJ.js";import"./sidebar-BVyuroT-.js";import"./sheet-N6Ni51Ms.js";import"./tooltip-DwlT4A8H.js";import"./index-CM-w1TYN.js";import"./index-B51CDgwY.js";import"./dropdown-menu-BJ11OL3K.js";import"./index-Dt-JkpPh.js";import"./index-tCO809zo.js";import"./check-BRFXV1aI.js";import"./PersonApi-BZdXp9je.js";import"./form-FwhVnNbA.js";import"./label-BN8Qe8K3.js";import"./input-DaKq_e4d.js";function y(){const r=u(),[t,i]=n.useState(null),{setBrand:d}=g(),o=[{id:"audi-america",img:h,alt:"Audi Authorized Collision Repair - Group of America",brandPrefix:"audi",region:"america"},{id:"vw-america",img:b,alt:"Volkswagen Certified Collision Repair Facility Program - Group of America",brandPrefix:"vw",region:"america"},{id:"audi-canada",img:R,alt:"Audi Authorized Collision Repair - Group of Canada",brandPrefix:"audi",region:"canada"},{id:"vw-canada",img:j,alt:"Volkswagen Certified Collision Repair Facility Program - Group of Canada",brandPrefix:"vw",region:"canada"}],l=a=>{d(a.brandPrefix,a.region),i(a.id),r({to:"/login",search:{brand:a.brandPrefix,region:a.region},replace:!1})};return e.jsxs("div",{className:"bg-background relative flex min-h-screen flex-col items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0",children:e.jsx("img",{src:x,alt:"Collision repair background",className:"h-full w-full object-cover"})}),e.jsxs("div",{className:"z-10 w-full max-w-6xl px-4 sm:px-8",children:[e.jsx("h1",{className:"text-center text-5xl font-bold tracking-tight text-white md:text-6xl",children:"Restricted Parts Tracker"}),e.jsx("div",{className:"mt-10 grid grid-cols-2 gap-6",children:o.map(a=>e.jsx("div",{onClick:()=>l(a),className:`flex cursor-pointer flex-col items-center space-y-4 rounded-lg bg-white py-5 transition-all duration-300 ${t===a.id?"scale-105 border-2 border-dashed border-blue-500":"hover:scale-105"}`,children:e.jsx("img",{src:a.img,alt:a.alt,className:"h-40 w-90 object-fill drop-shadow-lg"})},a.id))})]}),e.jsxs("div",{className:"z-10 mt-10 flex items-center justify-center gap-4 text-white",children:[e.jsx(S,{className:"h-5 w-5"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm font-medium",children:[e.jsx("button",{className:"transition hover:text-gray-600",children:"English"}),e.jsx("span",{children:"|"}),e.jsx("button",{className:"text-gray-500 transition hover:text-gray-700",children:"FranÃ§ais"})]})]})]})}const k=["/parts_orders","/repair_orders"],P={ProgramAdministrator:{forbiddenRoute:"/admin/parts_orders",defaultRoute:"/admin/parts_orders",allowedRoutes:["/admin","/parts_orders","/repair_orders"]},Shop:{forbiddenRoute:"/repair_orders",defaultRoute:"/repair_orders",allowedRoutes:["/repair_orders"]},Csr:{forbiddenRoute:"/parts_orders",defaultRoute:"/parts_orders",allowedRoutes:["/parts_orders","/repair_orders"]},Dealership:{forbiddenRoute:"/parts_orders",defaultRoute:"/parts_orders",allowedRoutes:["/parts_orders","/repair_orders"]},FieldStaff:{forbiddenRoute:"/parts_orders",defaultRoute:"/parts_orders",allowedRoutes:["/parts_orders"]}};function E(r,t){return r==="/"?!1:t.some(i=>r===i||r.startsWith(i+"/"))}function m(r,t){if(!t)return null;const i=P[t];return r==="/"?i.defaultRoute:E(r,i.allowedRoutes)?null:i.forbiddenRoute}function pe(){const{auth:r}=w(),t=_(),i=u(),d=v(s=>s.isLoading),o=r.user?.person?.type,l=o==="ProgramAdministrator";n.useEffect(()=>{},[r]),n.useEffect(()=>{if(r.loginStatus==="checking"||r.loginStatus!=="authenticated")return;const s=m(t.pathname,o);s&&i({to:s,replace:!0})},[r.loginStatus,o,t.pathname,i]);const a=n.useMemo(()=>r.loginStatus!=="authenticated"?!1:m(t.pathname,o)!==null,[r.loginStatus,t.pathname,o]),p=n.useMemo(()=>!k.some(s=>t.pathname===s||t.pathname.startsWith(s+"/")),[t.pathname]);if(r.loginStatus==="checking")return e.jsx(c,{});if(r.loginStatus!=="authenticated")return e.jsx(y,{});if(a)return e.jsx(c,{});const f=l&&p;return e.jsxs(e.Fragment,{children:[f?e.jsx(A,{}):e.jsx(N,{children:e.jsx(C,{})}),d&&e.jsx("div",{className:"fixed inset-0 z-9999 flex items-center justify-center bg-black/20 backdrop-blur-sm",children:e.jsx(c,{})})]})}export{pe as component};
