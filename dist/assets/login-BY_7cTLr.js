import{h as A,d as E,u as C,a as I,r as m,j as e,i as R,L as P,B as q,t,k as F,A as B}from"./index-DvwH5F9Z.js";import{u as D,M}from"./use-redirect-if-authenticated-FEVeev_S.js";import{C as U}from"./checkbox-CFvhohBt.js";import{I as N}from"./input-DYarJNKy.js";import{L as x}from"./label-BmEJJfe9.js";import{H as $,L as z}from"./header-Bwi_1XOA.js";import{E as H,a as W}from"./eye-DNn5i0zq.js";import"./Loading-DjNax36X.js";import"./index-DXAlcKWc.js";import"./index-Bu1cG3U1.js";import"./index-B3xR7uaR.js";import"./check-iYg700vF.js";import"./dropdown-menu-qZ9h6nf4.js";import"./index-CdCeNaJ0.js";import"./Combination-BlpO5CDz.js";import"./index-DZNfOI6o.js";import"./index-pCYxKcSP.js";import"./chevron-right-DH-lXxLl.js";import"./form-LyoIxO0u.js";import"./dialog-KCJIwJT-.js";import"./x-2MONtELq.js";import"./separator--YnZv5Zu.js";import"./user-BoCM7DEh.js";function O(){const h=A("login","_a.png"),b=E(),{redirect:o}=C({from:"/(auth)/login"}),{auth:j}=I(),[r,a]=m.useState(!1),[l,y]=m.useState(""),[d,v]=m.useState(""),[u,w]=m.useState(!1),{isLoading:L,LoadingComponent:f}=D();if(L&&f)return e.jsx(f,{});const S=async i=>{if(i.preventDefault(),!l||!d){t.error("Please enter email and password");return}a(!0);try{const n=new F;n.email=l.trim(),n.password=d,new B().login(n,{status200:c=>{const s=c.person;if(!s){t.error("Invalid session data"),a(!1);return}const k={id:s.id||0,email:s.email||l,firstName:s.firstName||"",lastName:s.lastName||"",type:s.type||"Shop",status:s.status||"Active",shopName:s.shop?.name,shopNumber:s.shop?.shopNumber,dealershipName:s.dealership?.name,dealershipNumber:s.dealership?.dealershipNumber};j.setUser(k),t.success(`Welcome back, ${s.firstName||l}!`);let p="/";if(o)try{const g=new URL(o);p=g.pathname+g.search}catch{p=o.startsWith("/")?o:`/${o}`}b({to:p,replace:!0})},status401:()=>{t.error("Invalid email or password"),a(!1)},status404:()=>{a(!1),t.error("Account not found")},error:c=>{console.error("Login error:",c),t.error("Network error, please try again"),a(!1)},else:(c,s)=>{console.error("Login error:",c,s),t.error("Network error, please try again"),a(!1)}},null)}catch(n){console.error("Login error:",n),t.error("An unexpected error occurred")}};return e.jsxs("div",{className:"bg-background flex min-h-screen flex-col",children:[e.jsx($,{isShowUser:!1}),e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsx("div",{className:"flex flex-col items-center justify-center px-6 py-12 lg:py-16",style:{backgroundImage:`url(${R})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:h?e.jsx("img",{loading:"lazy",src:h,alt:"logo",className:"mx-auto h-36 w-auto max-w-lg space-y-8 text-center drop-shadow-xl lg:h-56"}):null}),e.jsx("div",{className:"bg-card flex flex-1 items-start justify-center px-1 py-2 lg:py-12",children:e.jsxs("div",{className:"w-full max-w-md p-8 lg:p-10",children:[e.jsx("h2",{className:"text-card-foreground mb-10 text-center text-3xl font-bold lg:text-4xl",children:"Login"}),e.jsxs("form",{className:"space-y-7",onSubmit:S,children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(x,{htmlFor:"email",className:"text-foreground text-base font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"text-muted-foreground absolute top-1/2 left-4 h-5 w-5 -translate-y-1/2"}),e.jsx(N,{id:"email",type:"email",placeholder:"Enter your email",className:"h-14 rounded-full pl-12 text-base",value:l,onChange:i=>y(i.target.value),required:!0,disabled:r})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(x,{htmlFor:"password",className:"text-foreground text-base font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"text-muted-foreground absolute top-1/2 left-4 h-5 w-5 -translate-y-1/2"}),e.jsx(N,{id:"password",type:u?"text":"password",placeholder:"Enter your password",className:"h-14 rounded-full pr-12 pl-12 text-base",value:d,onChange:i=>v(i.target.value),required:!0,disabled:r}),e.jsx("button",{type:"button",onClick:()=>w(!u),className:"text-muted-foreground hover:text-foreground absolute top-1/2 right-4 -translate-y-1/2",disabled:r,children:u?e.jsx(H,{className:"h-5 w-5"}):e.jsx(W,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{id:"remember",disabled:r}),e.jsx(x,{htmlFor:"remember",className:"text-muted-foreground cursor-pointer font-normal",children:"Remember Me"})]}),e.jsx(P,{to:"/password/forgot",className:"text-destructive hover:text-destructive/80 font-medium transition-colors",children:"Forgot password"})]}),e.jsx(q,{type:"submit",variant:"default",className:"h-14 w-full rounded-full text-base font-semibold shadow-md",disabled:r,children:r?"Logging in...":"Log in"})]}),e.jsxs("div",{className:"text-muted-foreground mt-10 text-center text-sm",children:[e.jsx("p",{className:"mb-3",children:"Don't have an account?"}),e.jsxs("div",{className:"flex justify-center gap-8",children:[e.jsx("a",{href:"/registration/shop",className:"font-medium text-cyan-600 transition-colors hover:text-cyan-700",children:"Register as Shop"}),e.jsx("a",{href:"/registration/dealership",className:"font-medium text-cyan-600 transition-colors hover:text-cyan-700",children:"Register as Dealer"})]})]})]})})]})]})}const xe=O;export{xe as component};
