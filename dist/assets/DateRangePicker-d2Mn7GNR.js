import{i as f,r as l,j as a,B as m,J as h}from"./index-Bkm0i40-.js";import{f as o,C as p,a as x}from"./calendar-CwXp5SEl.js";import{P as g,a as y,b as j}from"./popover-PyNfnk6w.js";import{X as M}from"./x-CsoNbFna.js";function D(){const{auth:t}=f(),[s,n]=l.useState(!1);return l.useEffect(()=>{if(t.loginStatus==="authenticated"){n(!0);return}if(t.loginStatus==="checking")return;const r=setTimeout(()=>{n(!0)},2e3);return()=>clearTimeout(r)},[t.loginStatus]),{isAuthenticated:t.loginStatus==="authenticated",isLoading:!s||t.loginStatus==="checking",user:t.user}}function P({value:t,onChange:s,placeholder:n="Pick a date range",disabled:r=!1,onClose:i}){const d=t?.from?t.to?`${o(t.from,"MMM d, yyyy")} – ${o(t.to,"MMM d, yyyy")}`:`${o(t.from,"MMM d, yyyy")} – ?`:n,c=!!t?.from,u=e=>{e.preventDefault(),e.stopPropagation(),s(void 0),i?.(void 0),t=void 0};return a.jsxs(g,{onOpenChange:e=>!e&&i?.(t),children:[a.jsx(y,{asChild:!0,children:a.jsxs(m,{variant:"outline",disabled:r,className:h("w-[300px] justify-start text-left font-normal",!c&&"text-muted-foreground"),children:[a.jsx("span",{className:"flex-1 truncate",children:d}),c&&!r?a.jsx("span",{role:"button",tabIndex:0,onClick:u,onKeyDown:e=>e.key==="Enter"&&u,className:"hover:bg-muted inline-flex items-center justify-center rounded-full p-1 transition-colors","aria-label":"Clear date range",children:a.jsx(M,{className:"h-4 w-4"})}):a.jsx(p,{className:"h-4 w-4 opacity-50"})]})}),a.jsx(j,{className:"w-auto p-0",align:"start",children:a.jsx(x,{mode:"range",selected:t,onSelect:s,numberOfMonths:2,disabled:e=>e>new Date||e<new Date("1900-01-01"),defaultMonth:t?.from||new Date,initialFocus:!0})})]})}export{P as D,D as u};
