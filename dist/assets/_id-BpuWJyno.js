import{c as w,j as e,q as p,r as x,o as P,B as c,s as S,K as U}from"./index-DvwH5F9Z.js";import{u as Y,U as X,n as H}from"./index-BmBXdz5l.js";import{u as J,a as G,g as Q,F as ee,b as se,c as re,e as te,f as ae}from"./form-LyoIxO0u.js";import{D as le,a as de,b as ne,c as ie,d as ce}from"./dialog-KCJIwJT-.js";import{I as oe}from"./input-DYarJNKy.js";import{L as o}from"./label-BmEJJfe9.js";import{S as g}from"./separator--YnZv5Zu.js";import{T as me,a as xe,b as ue,c as pe}from"./tooltip-Bgbcl1Lq.js";import{X as v}from"./x-2MONtELq.js";import{T as he}from"./trash-2-CB1aQ8HD.js";import{P as R}from"./plus-C8PZqeE8.js";import{T as D}from"./triangle-alert-BK93d_iB.js";import{B as N}from"./badge-BzoErU6m.js";import{C as y}from"./check-iYg700vF.js";import"./Combination-BlpO5CDz.js";import"./index-DXAlcKWc.js";import"./index-DZNfOI6o.js";import"./index-B3xR7uaR.js";import"./index-D4oZXDqg.js";const fe=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],b=w("package",fe);const je=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],ge=w("paperclip",je);const Ne=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],k=w("pencil",Ne);function A({className:s,...a}){return e.jsx("div",{"data-slot":"card",className:p("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...a})}function be({className:s,...a}){return e.jsx("div",{"data-slot":"card-header",className:p("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...a})}function ve({className:s,...a}){return e.jsx("div",{"data-slot":"card-title",className:p("leading-none font-semibold",s),...a})}function ye({className:s,...a}){return e.jsx("div",{"data-slot":"card-content",className:p("px-6",s),...a})}const we=P({parts:U(P({number:S().min(1,"Part number is required")})),_estimateFile:S().optional()});function C({open:s,onOpenChange:a,initialData:r=null,mode:d="create",defaultDealership:h}){const[n,m]=x.useState([]),i=J({resolver:G(we),defaultValues:{parts:[{number:""},{number:""},{number:""},{number:""}]}}),{fields:O,append:_,remove:T}=Q({control:i.control,name:"parts"}),f=r?.partsOrderNumber!==void 0&&r.partsOrderNumber>0,I=r?.isAlternateDealer===!0,M=!r?.status||["CsrReview","DealershipProcessing"].includes(r.status),E=()=>{if(f){const t=r?.partsOrderNumber||1;return d==="edit"?`Edit Supplement #${t}`:`New Supplement #${t}`}else return d==="edit"?"Edit Parts Order":"New Parts Order"},z=()=>f?`Supplement #${r?.partsOrderNumber||1} Information`:"Parts Order Information",$=()=>d==="edit"&&M?"Update":"Save";x.useEffect(()=>{if(s&&r){const t=r.parts&&r.parts.length>0?r.parts.map(l=>({number:l})):[{number:""}];i.reset({parts:t.length>0?t:[{number:""}]}),m(r.estimateFiles||[])}else s&&d==="create"&&(i.reset({parts:[{number:""},{number:""},{number:""},{number:""}]}),m([]))},[s,r,d,i]);const K=t=>{if(n&&n.length===0&&(d==="create"||!r?.estimateFiles?.length)){i.setError("_estimateFile",{type:"manual",message:"Estimate PDF is required"});const l=document.querySelector("[data-estimate-error]");l&&l.scrollIntoView({behavior:"smooth",block:"center"});return}console.log("Submitted:",{mode:d,data:t,estimateFiles:n,isSupplement:f,partsOrderNumber:r?.partsOrderNumber}),a(!1)},{getRootProps:V,getInputProps:q,isDragActive:B}=Y({accept:{"application/pdf":[".pdf"]},onDrop:t=>{m(l=>[...l,...t])}}),W=t=>{m(l=>l.filter((u,L)=>L!==t))},j=()=>{i.reset(),m([]),a(!1)},Z=()=>I&&r?.alternateDealerName?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium",children:[r.alternateDealerName,r.alternateDealerId&&` (${r.alternateDealerId})`]}),e.jsx(me,{children:e.jsxs(xe,{children:[e.jsx(ue,{asChild:!0,children:e.jsx(D,{className:"h-4 w-4 text-yellow-500"})}),e.jsx(pe,{children:e.jsx("p",{children:"Ordered from an alternate dealer"})})]})})]}):e.jsx("p",{className:"font-medium",children:r?.orderFromDealership||h||"---"});return e.jsx(le,{open:s,onOpenChange:j,children:e.jsxs(de,{className:"flex max-h-[90vh] flex-col sm:max-w-4xl",children:[e.jsxs(ne,{className:"flex-shrink-0",children:[e.jsx(ie,{className:"pr-10 text-2xl font-semibold",children:E()}),e.jsx(g,{}),e.jsxs("button",{onClick:j,className:"ring-offset-background focus:ring-ring absolute top-4 right-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-none",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]}),e.jsx(ee,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(K),className:"flex min-h-0 flex-1 flex-col",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:[e.jsxs("section",{className:"mb-8",children:[e.jsxs("div",{className:"mb-5 flex items-center gap-3",children:[e.jsx(b,{className:"text-foreground h-5 w-5"}),e.jsx("h3",{className:"text-foreground text-lg font-semibold",children:"Repair Order Information"})]}),e.jsxs("div",{className:"bg-muted/50 grid grid-cols-1 gap-4 rounded-lg p-5 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx(o,{className:"text-muted-foreground text-xs",children:"Shop RO #"}),e.jsx("p",{className:"font-medium",children:r?.shopRo||"---"})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-muted-foreground text-xs",children:"Order From Dealership"}),Z()]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-muted-foreground text-xs",children:"Customer"}),e.jsx("p",{className:"font-medium",children:r?.customer||"---"})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-muted-foreground text-xs",children:"VIN"}),e.jsx("p",{className:"font-medium",children:r?.vin||"---"})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-muted-foreground text-xs",children:"Year/Make/Model"}),e.jsxs("p",{className:"font-medium",children:[r?.year||"---"," ",r?.make||"---"," ",r?.model||"---"]})]})]})]}),e.jsx(g,{className:"my-8"}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("div",{className:"mb-5 flex items-center gap-3",children:[e.jsx(b,{className:"text-foreground h-5 w-5"}),e.jsx("h3",{className:"text-foreground text-lg font-semibold",children:z()})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-8 text-sm",children:[e.jsxs("div",{children:[e.jsx(o,{className:"text-muted-foreground",children:"Order Submitted"}),e.jsx("p",{className:"mt-1 font-medium",children:"---"})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-muted-foreground",children:"Order Approved"}),e.jsx("p",{className:"mt-1 font-medium",children:"---"})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-muted-foreground",children:"Order Shipped"}),e.jsx("p",{className:"mt-1 font-medium",children:"---"})]}),d==="edit"&&r?.salesOrderNumber&&e.jsxs("div",{children:[e.jsx(o,{className:"text-muted-foreground",children:"Sales Order #"}),e.jsx("p",{className:"mt-1 font-medium",children:r.salesOrderNumber})]})]})]}),e.jsx(g,{className:"my-8"}),e.jsxs("div",{className:"grid grid-cols-1 gap-12 md:grid-cols-2",children:[e.jsxs("section",{children:[e.jsxs("div",{className:"mb-5 flex items-center gap-3",children:[e.jsx(b,{className:"text-foreground h-5 w-5"}),e.jsx("h3",{className:"text-foreground text-lg font-semibold",children:"Requested Part Numbers"})]}),e.jsxs("div",{className:"space-y-4",children:[O.map((t,l)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-muted-foreground w-12 text-sm",children:["Part ",l+1]}),e.jsx(se,{control:i.control,name:`parts.${l}.number`,render:({field:u})=>e.jsxs(re,{className:"flex-1",children:[e.jsx(te,{children:e.jsx(oe,{placeholder:"Enter part number",...u})}),e.jsx(ae,{})]})}),O.length>1&&e.jsx(c,{type:"button",variant:"ghost",size:"icon",onClick:()=>T(l),children:e.jsx(he,{className:"text-destructive h-4 w-4"})})]},t.id)),e.jsxs(c,{type:"button",variant:"outline",size:"sm",onClick:()=>_({number:""}),children:[e.jsx(R,{className:"mr-2 h-4 w-4"})," Add a Part"]})]})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"mb-5 flex items-center gap-3",children:[e.jsx(ge,{className:"text-foreground h-5 w-5"}),e.jsx("h3",{className:"text-foreground text-lg font-semibold",children:"Attachments"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(o,{className:"text-foreground text-sm font-medium",children:["Estimate",(d==="create"||!r?.estimateFiles?.length)&&e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs("div",{...V(),className:`flex cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed p-10 text-center transition-all ${B?"border-primary bg-muted":"border-border hover:border-primary"}`,children:[e.jsx("input",{...q()}),e.jsx(X,{className:"text-muted-foreground mb-3 h-12 w-12"}),n&&n.length>0?e.jsxs("div",{className:"w-full space-y-2",children:[n.map((t,l)=>e.jsxs("div",{className:"bg-muted/50 flex items-center justify-between rounded-md border p-2",children:[e.jsxs("div",{className:"flex-1 truncate",title:t.name,children:[e.jsx("p",{className:"text-foreground truncate text-sm font-medium",children:t.name}),e.jsxs("p",{className:"text-muted-foreground text-xs",children:[(t.size/1024).toFixed(2)," KB"]})]}),e.jsx("button",{type:"button",onClick:u=>{u.stopPropagation(),W(l)},className:"text-destructive ml-2 text-xs hover:underline",children:"Remove"})]},`${t.name}-${l}`)),e.jsxs("p",{className:"text-muted-foreground mt-2 text-xs",children:["Drop more PDF files here or"," ",e.jsx("span",{className:"text-primary hover:underline",children:"click to browse"})]})]}):e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Drop your PDF files here or"," ",e.jsx("span",{className:"text-primary hover:underline",children:"click to browse"})]})]}),i.formState.errors._estimateFile&&e.jsx("p",{className:"text-destructive text-sm",children:i.formState.errors._estimateFile.message})]})]})]})]}),e.jsx(ce,{className:"bg-muted/50 flex-shrink-0 border-t px-6 py-4 backdrop-blur",children:e.jsxs("div",{className:"flex w-full justify-end gap-3",children:[e.jsx(c,{type:"button",variant:"outline",onClick:j,children:"Cancel"}),e.jsx(c,{type:"submit",variant:"default",children:$()})]})})]})})]})})}const F=[{id:1,title:"Order Review",status:"rejected",submitted:"2/15/2025 4:01 PM",by:"Jake Renshaw"},{id:2,title:"Order Fulfillment",status:"pending",approved:!0},{id:3,title:"Order Received",status:"rejected"}];function Oe(){return e.jsxs(A,{className:"p-6",children:[e.jsx("h2",{className:"mb-6 text-2xl font-bold",children:"Parts Tracker"}),e.jsx("div",{className:"space-y-8",children:F.map((s,a)=>e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`flex h-6 w-6 items-center justify-center rounded-full p-1 text-sm font-bold text-white ${s.status==="approved"?"bg-green-600":s.status==="rejected"?"bg-red-500":s.status==="waiting"?"bg-blue-600":"bg-gray-400"}`,children:s.status==="approved"?e.jsx(y,{className:"h-5 w-5"}):s.status==="rejected"?e.jsx(v,{className:"h-5 w-5"}):s.id}),a<F.length-1&&e.jsx("div",{className:"mt-2 h-full w-px border-l border-gray-300"})]}),e.jsxs("div",{className:"flex-1 pb-8",children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2 p-2",children:[e.jsx("h3",{className:"font-semibold",children:s.title}),s.status==="waiting"&&e.jsx(N,{className:"bg-blue-100 text-blue-700",children:"Waiting on You"}),s.status==="pending"&&e.jsx(N,{className:"bg-gray-500 text-black",children:"Pending CSR"}),s.status==="rejected"&&e.jsx(N,{className:"bg-purple-500 text-white",children:"Waiting on You"})]}),s.submitted&&e.jsx("div",{children:e.jsxs("p",{className:"text-muted-foreground mb-2 text-sm",children:["Request was Submitted on ",e.jsx("strong",{children:s.submitted})," ","by ",e.jsx("strong",{children:s.by}),"."]})}),s.approved!==void 0&&e.jsxs("div",{className:"flex flex-col gap-2",children:[s.id===2&&e.jsx("p",{className:"mb-3 text-sm",children:"This request is"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{size:"sm",variant:s.approved?"default":"outline",className:s.approved?"bg-green-600 hover:bg-green-700":"",children:[e.jsx(y,{className:"mr-1 h-4 w-4"}),"Approved"]}),e.jsxs(c,{size:"sm",variant:s.rejected?"default":"outline",className:s.rejected?"bg-red-600 hover:bg-red-700":"",children:[e.jsx(v,{className:"mr-1 h-4 w-4"}),"Rejected"]})]})]})]})]},s.id))})]})}function Pe(){const[s,a]=x.useState(!1),[r,d]=x.useState(!1),[h]=x.useState({shopRo:"805",customer:"Brian Cooper",vin:"WVWZZZ5CZKK246801",make:"audi",year:"2017",model:"s3",salesOrderNumber:"SO-174",orderFromDealership:"Pacific VW Motors | 88321 (Assigned Dealer)",parts:["06D-115-562X","1K0-615-301M","06F-903-023P","07K-905-715b"],estimateFiles:[new File(["file_name.pdf"],"file_name.pdf",{type:"application/pdf"}),new File(["file_name.pdf"],"file2_name.pdf",{type:"application/pdf"}),new File(["file_name.pdf"],"file3_name.pdf",{type:"application/pdf"})],status:"CsrReview",isAlternateDealer:!1,alternateDealerName:"",alternateDealerId:""});return e.jsxs("div",{className:"bg-background text-foreground",children:[e.jsx("div",{className:"mt-8 h-full w-full",children:e.jsx("img",{src:H,alt:"Repair Order List",className:"h-full w-full object-cover"})}),e.jsxs("div",{className:"mx-4 my-6 p-3",children:[e.jsxs("div",{className:"flex w-full flex-col rounded-sm border",children:[e.jsxs("div",{className:"bg-muted text-foreground flex w-full items-center justify-between p-5",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Repair Order # : 805"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(c,{size:"sm",className:"h-8 bg-green-600 text-xs font-medium",children:[e.jsx(y,{className:"mr-1.5 h-3.5 w-3.5"}),"Mark Repair as Complete"]}),e.jsxs(c,{size:"sm",variant:"outline",className:"h-8 text-xs font-medium",children:[e.jsx(k,{className:"mr-1.5 h-3.5 w-3.5"}),"Edit Repair Order"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 p-5 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Customer"}),e.jsx("p",{className:"font-medium",children:"Brian Cooper"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"VIN"}),e.jsx("p",{className:"font-mono",children:"AUDIZZ5CZKK246801"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Year/Make/Model"}),e.jsx("p",{className:"font-medium",children:"2017 Audi S3 Sedan"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Date Submitted"}),e.jsx("p",{children:"02/15/2025 10:23 AM by Jake Renshaw"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Submitted To"}),e.jsx("p",{className:"font-medium",children:"Pacific Motors (98321)"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Date Closed"}),e.jsx("p",{className:"text-muted-foreground",children:"---"})]})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Pre-Repair Photos"}),e.jsx("div",{className:"mt-1 flex flex-wrap gap-2",children:["image1.jpg","image2.jpg","image3.jpg"].map(n=>e.jsx("a",{href:"#",className:"text-blue-700 underline hover:underline",children:n},n))})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Structural Measurements"}),e.jsx("br",{}),e.jsx("a",{href:"#",className:"text-primary hover:underline",children:"measurements.pdf"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Post-Repair Photos"}),e.jsx("div",{className:"mt-1 flex flex-wrap gap-2",children:["image 1.jpg","image 2.jpg"].map(n=>e.jsx("a",{href:"#",className:"text-primary hover:underline",children:n},n))})]})]})]})]}),e.jsxs("div",{className:"my-5 flex flex-col rounded-sm border",children:[e.jsxs("div",{className:"bg-muted flex items-center justify-between overflow-hidden p-5",children:[e.jsxs("div",{className:"flex items-center gap-6 text-sm font-medium",children:[e.jsx(c,{variant:"outline",className:"ring-border flex items-center gap-2 rounded-lg px-4 py-2 ring-1",children:"Parts Order"}),e.jsxs("button",{className:"text-muted-foreground hover:text-foreground bg-accent flex items-center gap-2",children:[e.jsx(D,{className:"text-destructive h-4 w-4"}),"Supplement 1"]}),e.jsx("button",{className:"text-muted-foreground hover:text-foreground bg-accent",children:"Supplement 2"})]}),e.jsxs(c,{onClick:()=>d(!0),variant:"outline",size:"sm",className:"h-8 rounded-lg font-medium",children:[e.jsx(R,{className:"mr-1.5 h-3.5 w-3.5"}),"Supplemental Parts Order"]})]}),e.jsxs("div",{className:"m-5 flex gap-8",children:[" ",e.jsxs("div",{className:"max-w-lg flex-1",children:[" ",e.jsxs(A,{className:"rounded-xl border shadow-sm",children:[e.jsx(be,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ve,{className:"text-foreground text-base font-semibold",children:"Sales Order #: SO-174"}),e.jsxs(c,{onClick:()=>a(!0),size:"sm",variant:"outline",className:"h-7 px-2 text-xs",children:[e.jsx(k,{className:"h-3.5 w-3.5"}),"Edit Parts Order"]})]})}),e.jsxs(ye,{className:"space-y-6 text-sm",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-muted-foreground mb-3 font-medium",children:"Requested Parts"}),e.jsxs("ol",{className:"text-foreground/90 space-y-2 pl-5 font-mono",children:[e.jsx("li",{children:"(1) 06D-115-562X"}),e.jsx("li",{children:"(2) 1K0-615-301M"}),e.jsx("li",{children:"(3) 06F-903-023P"}),e.jsx("li",{children:"(4) 07K-905-715b"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Parts Estimate"}),e.jsx("br",{}),e.jsx("a",{href:"#",className:"font-medium text-blue-700 underline hover:underline",children:"file_name.pdf"})]})]})]})]}),e.jsx("div",{className:"min-w-0 flex-1",children:e.jsx(Oe,{})})]})]})]}),e.jsx(C,{open:r,onOpenChange:d,mode:"create",defaultDealership:"Pacific VW Motors | 88321 (Assigned Dealer)"}),e.jsx(C,{open:s,onOpenChange:a,mode:"edit",initialData:h,defaultDealership:"Pacific VW Motors | 111111 (Assigned Dealer)"})]})}const Ze=Pe;export{Ze as component};
